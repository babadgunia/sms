<div class="ui-g">
	<div class="ui-g-1">
		<input #idField pInputText placeholder="Id" i18n-placeholder="@@id" class={{searchFilterComponentClass}}/>
	</div>
	<div class="ui-g-1 {{searchFilterComponentWrapperClass}}">
		<input #usernameField pInputText placeholder="Username" i18n-placeholder="@@username" class={{searchFilterComponentClass}}/>
	</div>
	<div class="ui-g-1 {{searchFilterComponentWrapperClass}}">
		<input #nameField pInputText placeholder="Name" i18n-placeholder="@@name" class={{searchFilterComponentClass}}/>
	</div>

	<div class="ui-g-7"></div>

	<div class="ui-g-1 {{searchFilterComponentWrapperClass}}">
		<button pButton type="button" label="Clear" i18n-label="@@clear" icon={{searchFilterClearButtonIcon}} (click)="table.reset(); clearFilter()"
						class={{searchFilterComponentClass}}></button>
	</div>
	<div class="ui-g-1 {{searchFilterComponentWrapperClass}}">
		<button pButton type="button" label="Search" i18n-label="@@search" icon={{searchFilterSearchButtonIcon}}
						(click)="initFilter(idField.value, usernameField.value, nameField.value)" class={{searchFilterComponentClass}}></button>
	</div>

	<div class="ui-g-12 {{searchTableClass}}">
		<p-dataTable #table [value]="users" [paginator]="true" [totalRecords]="tableTotalRecords" [rows]="tableRows" [pageLinks]="tablePageLinks"
								 [lazy]="true" (onLazyLoad)="initLazyFilter($event)" [loading]="tableLoading" [loadingIcon]="tableLoadingIcon">
			<p-column field="id" header="Id" i18n-header="@@id" [filter]="true" filterPlaceholder="Id" i18n-filterPlaceholder="@@id" filterMatchMode="contains"></p-column>
			<p-column field="username" header="Username" i18n-header="@@username" [filter]="true" filterPlaceholder="Username" i18n-filterPlaceholder="@@username"
								filterMatchMode="contains"></p-column>
			<p-column field="name" header="Name" i18n-header="@@name" [filter]="true" filterPlaceholder="Name" i18n-filterPlaceholder="@@name" filterMatchMode="contains"></p-column>

			<p-column styleClass={{searchTableActionColumnClass}}>
				<ng-template pTemplate="header">
					<button pButton type="button" label="Add" i18n-label="@@add" icon={{searchTableActionColumnAddButtonClass}} (click)="add()" *ngIf="hasPermission('USER.ADD')"></button>
				</ng-template>
				<div class="ui-g">
					<ng-template let-col let-user="rowData" pTemplate="body">
						<div class="ui-g-6">
							<button pButton type="button" title="Edit" i18n-title="@@edit" icon={{searchTableActionColumnEditButtonClass}} (click)="get(user)" *ngIf="hasPermission('USER.EDIT')"></button>
							<button pButton type="button" title="View" i18n-title="@@view" icon={{searchTableActionColumnViewButtonClass}} (click)="get(user)" *ngIf="!hasPermission('USER.EDIT')"></button>
						</div>
						<div class="ui-g-6">
							<button pButton type="button" title="Delete" i18n-title="@@delete" icon={{searchTableActionColumnDeleteButtonClass}} (click)="delete(user)"
											*ngIf="hasPermission('USER.DELETE')"></button>
						</div>
					</ng-template>
				</div>
			</p-column>

			<p-footer i18n="@@tableFooter">{{tableTotalRecords}} records found</p-footer>
		</p-dataTable>
	</div>
</div>

<p-dialog header="Edit user" [(visible)]="showUserDialog">
	<table>
		<tr>
			<td>
				Username
			</td>
			<td>
				<input pInputText [(ngModel)]="selectedUser.username">
			</td>

		</tr>
		<tr>
			<td>
				Name
			</td>
			<td>
				<input pInputText [(ngModel)]="selectedUser.name">
			</td>
		</tr>
	</table>

	<p-footer>
		<div>
			<button type="button" pButton icon="fa-close" (click)="showUserDialog=false" label="No"></button>
			<button type="button" pButton icon="fa-check" (click)="showUserDialog=false" label="Yes"></button>
		</div>
	</p-footer>
</p-dialog>