<div class="ui-g">
	<div class="ui-g-1 {{searchFilterFieldWrapperClass}}">
		<input pInputText type="number" #idField [placeholder]="getMessage('ID_SHORT')" [class]="searchFilterComponentClass"/>
	</div>
	<div class="ui-g-1 {{searchFilterFieldWrapperClass}}">
		<input pInputText #usernameField [placeholder]="getMessage('USERNAME_SHORT')" [class]="searchFilterComponentClass"/>
	</div>
	<div class="ui-g-1 {{searchFilterFieldWrapperClass}}">
		<input pInputText #emailField [placeholder]="getMessage('EMAIL')" [class]="searchFilterComponentClass"/>
	</div>
	<div class="ui-g-1 {{searchFilterFieldWrapperClass}}">
		<input pInputText #nameField [placeholder]="getMessage('NAME')" [class]="searchFilterComponentClass"/>
	</div>
	<div class="ui-g-1 {{searchFilterFieldWrapperClass}}">
		<p-dropdown #statusBox [placeholder]="getMessage('STATUS')" [options]="statuses" [autoWidth]="false" [styleClass]="searchFilterComponentClass"
								(onChange)="resetDropdown($event.value, statusBox)"></p-dropdown>
	</div>
	<div class="ui-g-1 {{searchFilterFieldWrapperClass}}">
		<p-dropdown #languageBox [placeholder]="getMessage('LANGUAGE')" [options]="languages" [autoWidth]="false" [styleClass]="searchFilterComponentClass"
								(onChange)="resetDropdown($event.value, languageBox)"></p-dropdown>
	</div>
	<div class="ui-g-1 {{searchFilterFieldWrapperClass}}">
		<p-dropdown #userGroupBox [placeholder]="getMessage('USER_GROUP')" [options]="userGroups" [autoWidth]="false" [styleClass]="searchFilterComponentClass"
								(onChange)="resetDropdown($event.value, userGroupBox)"></p-dropdown>
	</div>

	<div class="ui-g-3"></div>

	<div class="ui-g-1 {{searchFilterButtonWrapperClass}}">
		<button pButton [label]="getMessage('CLEAR')" [icon]="searchFilterClearButtonIcon" [class]="searchFilterComponentClass"
						(click)="resetFilter(idField, usernameField, emailField, nameField, statusBox, languageBox, userGroupBox); getList()"></button>
	</div>
	<div class="ui-g-1 {{searchFilterButtonWrapperClass}}">
		<button pButton [label]="getMessage('SEARCH')" [icon]="searchFilterSearchButtonIcon" [class]="searchFilterComponentClass"
						(click)="initFilter(idField.value, usernameField.value, emailField.value, nameField.value, statusBox.value, languageBox.value, userGroupBox.value); getList()"></button>
	</div>

	<div class="ui-g-12 ui-g-nopad">
		<p-dataTable [value]="entities" [immutable]="false" [lazy]="true" [paginator]="true" [totalRecords]="tableTotalRecords" [rows]="searchTableRows" [pageLinks]="searchTablePageLinks"
								 [loading]="loading"
								 (onLazyLoad)="initLazyFilter($event, idField.value, usernameField.value, emailField.value, nameField.value, statusBox.value, languageBox.value, userGroupBox.value);
								 getList()">
			<p-column field="id" [header]="getMessage('ID')"></p-column>
			<p-column field="username" [header]="getMessage('USERNAME')"></p-column>
			<p-column field="email" [header]="getMessage('EMAIL')"></p-column>
			<p-column field="name" [header]="getMessage('NAME')"></p-column>
			<p-column field="status" [header]="getMessage('STATUS')"></p-column>
			<p-column field="language" [header]="getMessage('LANGUAGE')"></p-column>
			<p-column field="userGroup.name" [header]="getMessage('USER_GROUP')"></p-column>

			<p-column [styleClass]="searchTableActionColumnClass">
				<ng-template pTemplate="header">
					<button pButton [label]="getMessage('ADD')" [icon]="searchTableActionColumnAddButtonIcon" [class]="searchTableActionColumnButtonClass"
									(click)="initAdd(); updateDialogStates(true, false, false)" *ngIf="hasPermission('USER.ADD')"></button>
				</ng-template>
				<ng-template pTemplate="body" let-entity="rowData">
					<div class="ui-g">
						<div class="ui-g-nopad {{hasPermission('USER.DELETE') ? searchTableActionColumnViewEditButtonWrapperClass : ''}}" [class.ui-g-12]="!hasPermission('USER.DELETE')"
								 [class.ui-g-6]="hasPermission('USER.DELETE')">
							<button pButton [title]="getMessage('EDIT')" [icon]="searchTableActionColumnEditButtonIcon" [class]="searchTableActionColumnButtonClass"
											(click)="updateDialogStates(false, true, false); get(entity)" *ngIf="hasPermission('USER.EDIT')"></button>
							<button pButton [title]="getMessage('VIEW')" [icon]="searchTableActionColumnViewButtonIcon" [class]="searchTableActionColumnButtonClass"
											(click)="updateDialogStates(false, false, true); get(entity)" *ngIf="!hasPermission('USER.EDIT')"></button>
						</div>
						<div class="ui-g-6 ui-g-nopad {{searchTableActionColumnDeleteButtonWrapperClass}}" *ngIf="hasPermission('USER.DELETE')">
							<button pButton [title]="getMessage('DELETE')" [icon]="searchTableActionColumnDeleteButtonIcon" [class]="searchTableActionColumnButtonClass"
											(click)="confirmDeleteAction(entity)"></button>
						</div>
					</div>
				</ng-template>
			</p-column>

			<p-footer>{{getMessage('SEARCH_TABLE_FOOTER', tableTotalRecords)}}</p-footer>
		</p-dataTable>
	</div>
</div>

<p-dialog header="{{isAdd ? getMessage('ADD') : isEdit ? getMessage('EDIT') : getMessage('VIEW')}}" [(visible)]="showDialog" [modal]="true" [styleClass]="formDialogClass"
					[contentStyle]="formDialogContentStyle">
	<div class="ui-g">
		<div class="ui-g-6">
			{{getMessage('USERNAME')}}
		</div>
		<div class="ui-g-6">
			<input pInputText [(ngModel)]="entity.username" [class]="formComponentClass" [disabled]="isView || isEdit">
		</div>
		<div class="ui-g-6">
			{{getMessage('EMAIL')}}
		</div>
		<div class="ui-g-6">
			<input pInputText [(ngModel)]="entity.email" [class]="formComponentClass" [disabled]="isView">
		</div>
		<div class="ui-g-6">
			{{getMessage('NAME')}}
		</div>
		<div class="ui-g-6">
			<input pInputText [(ngModel)]="entity.name" [class]="formComponentClass" [disabled]="isView">
		</div>
		<div class="ui-g-6">
			{{getMessage('STATUS')}}
		</div>
		<div class="ui-g-6">
			<p-dropdown #dialogStatusBox [placeholder]="getMessage('STATUS')" [options]="statuses" [(ngModel)]="entity.status" [autoWidth]="false" [styleClass]="formComponentClass"
									(onChange)="resetDropdown($event.value, dialogStatusBox)" [disabled]="isView"></p-dropdown>
		</div>
		<div class="ui-g-6">
			{{getMessage('LANGUAGE')}}
		</div>
		<div class="ui-g-6">
			<p-dropdown #dialogLanguageBox [placeholder]="getMessage('LANGUAGE')" [options]="languages" [(ngModel)]="entity.language" [autoWidth]="false" [styleClass]="formComponentClass"
									(onChange)="resetDropdown($event.value, dialogLanguageBox)" [disabled]="isView"></p-dropdown>
		</div>
		<div class="ui-g-6">
			{{getMessage('USER_GROUP')}}
		</div>
		<div class="ui-g-6">
			<p-dropdown #dialogUserGroupBox [placeholder]="getMessage('USER_GROUP')" [options]="userGroups" [(ngModel)]="entity.userGroup" [autoWidth]="false"
									[styleClass]="formComponentClass" (onChange)="resetDropdown($event.value, dialogUserGroupBox)" [disabled]="isView"></p-dropdown>
		</div>
	</div>

	<p-footer>
		<button pButton [label]="getMessage('RESET_PASSWORD')" icon="fa-retweet" (click)="resetPassword(); hideDialog()" *ngIf="isEdit && hasPermission('USER.RESET_PASSWORD')"></button>
		<button pButton [label]="getMessage('SAVE')" [icon]="formSaveButtonIcon" (click)="save()" *ngIf="!isView"></button>
		<button pButton [label]="getMessage('CANCEL')" [icon]="formCancelButtonIcon" (click)="hideDialog()"></button>
	</p-footer>
</p-dialog>